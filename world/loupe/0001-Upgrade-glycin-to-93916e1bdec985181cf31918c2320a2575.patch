From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: "Jan Alexander Steffens (heftig)" <heftig@archlinux.org>
Date: Fri, 26 Sep 2025 15:28:13 +0200
Subject: [PATCH] Upgrade glycin to 93916e1bdec985181cf31918c2320a25750de2ab

See: https://gitlab.archlinux.org/archlinux/packaging/packages/glycin/-/issues/2
---
 Cargo.lock | 26 +++++++++++++++++++-------
 Cargo.toml |  2 +-
 2 files changed, 20 insertions(+), 8 deletions(-)

diff --git a/Cargo.lock b/Cargo.lock
index 75084f43541b..e22392c0e165 100644
--- a/Cargo.lock
+++ b/Cargo.lock
@@ -100,6 +100,20 @@ dependencies = [
  "futures-lite",
 ]
 
+[[package]]
+name = "async-global-executor"
+version = "3.1.0"
+source = "registry+https://github.com/rust-lang/crates.io-index"
+checksum = "13f937e26114b93193065fd44f507aa2e9169ad0cdabbb996920b1fe1ddea7ba"
+dependencies = [
+ "async-channel",
+ "async-executor",
+ "async-io",
+ "async-lock",
+ "blocking",
+ "futures-lite",
+]
+
 [[package]]
 name = "async-io"
 version = "2.5.0"
@@ -860,11 +874,11 @@ dependencies = [
 
 [[package]]
 name = "glycin"
-version = "3.0.0"
-source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "3b70ebfc9e7c504e99580122d58174a3976f086ec55834692e44dd7489d36ed9"
+version = "3.0.1"
+source = "git+https://gitlab.gnome.org/GNOME/glycin.git#93916e1bdec985181cf31918c2320a25750de2ab"
 dependencies = [
  "async-fs",
+ "async-global-executor",
  "async-io",
  "async-lock",
  "blocking",
@@ -895,27 +909,25 @@ dependencies = [
 [[package]]
 name = "glycin-common"
 version = "1.0.0"
-source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "a2382f0d91d42f750486e7c8316cba4781404e574458b5f28d91daff1656e73b"
+source = "git+https://gitlab.gnome.org/GNOME/glycin.git#93916e1bdec985181cf31918c2320a25750de2ab"
 dependencies = [
  "bitflags",
  "gufo-common",
  "half",
  "memmap2",
  "nix",
  "paste",
  "rmp-serde",
  "serde",
  "thiserror",
  "zerocopy",
  "zvariant",
 ]
 
 [[package]]
 name = "glycin-utils"
 version = "4.0.0"
-source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "127d5f71bf307364e30ef0b6720a7a9557b2b642a933c2e048ac5f5fba2dc1c3"
+source = "git+https://gitlab.gnome.org/GNOME/glycin.git#93916e1bdec985181cf31918c2320a25750de2ab"
 dependencies = [
  "async-lock",
  "bitflags",
diff --git a/Cargo.toml b/Cargo.toml
index 7c7bef6778b5..d8dfd40d8a12 100644
--- a/Cargo.toml
+++ b/Cargo.toml
@@ -27,7 +27,7 @@ chrono = { version = "0.4.38", default-features = false, features = ["std"] }
 gettext-rs = { version = "0.7.0", features = ["gettext-system"] }
 gettext-sys = { version = "0.22.5", features = ["gettext-system"] }
 gio = { version = "0.21.0", features = ["v2_74"] }
-glycin = { version = "3.0.0", features = ["gdk4", "unstable-config"] }
+glycin = { git = "https://gitlab.gnome.org/GNOME/glycin.git", features = ["gdk4", "unstable-config"] }
 gtk = { package = "gtk4", version = "0.10.0", features = [
     "v4_14",
     "xml_validation",
