# Maintainer: David Runge <dvzrv@archlinux.org>

pkgname=passt
pkgver=2024_06_24.1ee2eca
pkgrel=1
pkgdesc="Plug A Simple Socket Transport"
arch=(x86_64)
url="https://passt.top/passt/about/"
license=(
  BSD-3-Clause
  GPL-2.0-or-later
)
depends=(glibc)
optdepends=(
  'sh: for demo script'
)
source=(https://passt.top/$pkgname/snapshot/$pkgname-$pkgver.tar.zst)
sha512sums=('d4fb346c028efdbd1f771c319145700180010f3027df9ca8d7c9ea1ac1c5d2457d7f670c8e52a965456f384406cf74407e06aba3da77c668666fcb848d54e9de')
b2sums=('6e17acb703f79a8253bb5c3e92297c74407a332dbd1c7b6bd245ced5526721ccc187c5681173cd901e83675d62fd71e701d21e33be434aceae2b65a24704ed67')

build() {
  make VERSION="$pkgver" -C $pkgname-$pkgver
}

package() {
  make DESTDIR="$pkgdir/" prefix=/usr install -C $pkgname-$pkgver
  install -vDm 644 $pkgname-$pkgver/LICENSES/* -t "$pkgdir/usr/share/licenses/$pkgname/"
}
