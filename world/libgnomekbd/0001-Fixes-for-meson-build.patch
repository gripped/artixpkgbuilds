From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Jan Alexander Steffens <heftig@archlinux.org>
Date: Wed, 17 Aug 2022 19:18:23 +0000
Subject: [PATCH] Fixes for meson build

---
 libgnomekbd/meson.build | 7 +++++++
 meson.build             | 1 +
 2 files changed, 8 insertions(+)

diff --git a/libgnomekbd/meson.build b/libgnomekbd/meson.build
index ca65a8988c1a..0bffa32e5a7f 100644
--- a/libgnomekbd/meson.build
+++ b/libgnomekbd/meson.build
@@ -39,6 +39,7 @@ libgnomekbd_deps = [
   glib_dep,
   gobject_dep,
   gio_dep,
+  gmodule_export_dep,
   gdk_dep,
   gtk_dep,
   x11_dep,
@@ -72,6 +73,11 @@ pkg.generate(
   name: 'libgnomekbd',
   description: 'GNOME keyboard shared library',
   version: meson.project_version(),
+  requires: [
+    'gmodule-export-2.0',
+    'gdk-3.0',
+    'libxklavier',
+  ],
 )
 
 libgnomekbd_dep = declare_dependency(
@@ -137,6 +143,7 @@ pkg.generate(
   name: 'libgnomekbdui',
   description: 'GNOME keyboard shared library',
   version: meson.project_version(),
+  requires: ['libgnomekbd'],
 )
 
 libgnomekbdui_dep = declare_dependency(
diff --git a/meson.build b/meson.build
index cf8a9f52f6fb..921591cd091c 100644
--- a/meson.build
+++ b/meson.build
@@ -28,6 +28,7 @@ libxklavier_req = '>= 5.2'
 glib_dep = dependency('glib-2.0', version: glib_req)
 gobject_dep = dependency('gobject-2.0', version: glib_req)
 gio_dep = dependency('gio-2.0', version: glib_req)
+gmodule_export_dep = dependency('gmodule-export-2.0', version: glib_req)
 gdk_dep = dependency('gdk-3.0', version: gdk_req)
 gtk_dep = dependency('gtk+-3.0', version: gtk_req)
 x11_dep = dependency('x11')
