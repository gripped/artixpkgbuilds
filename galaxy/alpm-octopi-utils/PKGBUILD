# Maintainer: Artoo <artoo@artixlinux.org>
# Contributor: MatMoul <matmoul at the google email domain which is .com>

_url=https://github.com/aarnt/alpm_octopi_utils
_commit=1e735c3a27803ca5b6470e946f9cac708143dfd9
_pkgname=alpm_octopi_utils

pkgname=alpm-octopi-utils
pkgver=1.0.2
pkgrel=6
pkgdesc="Alpm utils for Octopi"
arch=('x86_64')
url="https://tintaescura.com/projects/octopi/"
license=('GPL-3.0-or-later')
provides=(libalpm_octopi_utils.so)
depends=(glibc glib2 pacman)
makedepends=(cmake git vala)
conflicts=(libalpm_octopi_utils)
replaces=(libalpm_octopi_utils)
source=("$pkgname::git+$_url.git#commit=$_commit")
sha256sums=('SKIP')

build() {
    cmake -S "$pkgname" -B build \
        -DCMAKE_INSTALL_PREFIX=/usr
    cmake --build build
}

package() {
    DESTDIR="$pkgdir" cmake --install build
}
