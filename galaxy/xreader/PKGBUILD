# Maintainer: Bruno Pagani <archange@archlinux.org>
# Contributor: Eli Schwartz <eschwartz@archlinux.org>
# Contributor: Nate Simon <aurpkg (at natesimon.net)>

pkgname=xreader
pkgver=4.6.3
pkgrel=1
pkgdesc='Document viewer for files like PDF and Postscript'
arch=(x86_64)
url='https://github.com/linuxmint/xreader'
license=(GPL-2.0-or-later)
groups=(x-apps)
depends=(
  at-spi2-core
  cairo
  dconf
  gcc-libs
  gdk-pixbuf2
  glib2
  glibc
  gtk3
  hicolor-icon-theme
  libarchive
  libice
  libsm
  libtiff
  libx11
  libxml2
  pango
  poppler-glib
  webkit2gtk-4.1
  xapp
  zlib
)
makedepends=(
  djvulibre
  git
  glib2-devel
  gobject-introspection
  intltool
  itstool
  libgxps
  libspectre
  meson
  texlive-bin
)
optdepends=(
  'djvulibre: support for djvu files'
  'libgxps: support for xps files'
  'libspectre: support for dvi and ps files'
  'mathjax2: support for math in epub files'
  'texlive-bin: support for dvi files'
)
source=("git+https://github.com/linuxmint/xreader.git#tag=${pkgver}")
b2sums=('8837a7803ec05e0563705f17e108c0e09eea34894cce140f0407eaa526632db4ae2d077964377108018456c768c3fa977713d2e6508385ff2ff29608dc96ea10')

build() {
  artix-meson $pkgname build \
    --libexecdir=lib/$pkgname \
    -D mathjax-directory=/usr/share/mathjax2 \
    -D comics=true \
    -D djvu=true \
    -D dvi=true \
    -D t1lib=true \
    -D pixbuf=true \
    -D help_files=true \
    -D introspection=true
  meson compile -C build
}

package(){
  meson install -C build --destdir="$pkgdir"
}
