# Maintainer: Bruno Pagani <archange@archlinux.org>
# Contributor: Eli Schwartz <eschwartz@archlinux.org>
# Contributor: Alexandre Filgueira <alexfilgueira@cinnarch.com>
# Contributor: Adam Hani Schakaki <adam@schakaki.net>
# Contributor: Ner0

pkgname=muffin
pkgver=6.6.0
pkgrel=2
pkgdesc='Cinnamon window manager based on Mutter'
arch=(x86_64)
url='https://github.com/linuxmint/muffin'
license=(GPL-2.0-or-later)
depends=(
  at-spi2-core
  cairo
  cinnamon-desktop
  cinnamon-settings-daemon
  dconf
  fontconfig
  fribidi
  gcc-libs
  gdk-pixbuf2
  glib2
  glibc
  graphene
  gtk3
  json-glib
  libcanberra
  libdrm
  libglvnd
  libgudev
  libice
  libinput
  libpipewire
  libsm
  libwacom
  libx11
  libxau
  libxcb
  libxcomposite
  libxcursor
  libxdamage
  libxext
  libxfixes
  libxi
  libxinerama
  libxkbcommon
  libxkbcommon-x11
  libxkbfile
  libxrandr
  libxtst
  mesa
  pango
  pipewire
  startup-notification
  systemd-libs
  wayland
  xorg-xwayland
  zenity
)
makedepends=(
  egl-wayland
  git
  glib2-devel
  gobject-introspection
  meson
  wayland-protocols
)
source=("git+https://github.com/linuxmint/muffin.git#tag=$pkgver")
b2sums=(8b37b81e4287926234adab6d01953a87df164bce3ce8d99ef9de86492dd77fadf18576af7226e222cbef8376c9b4830b44a16d6b9a1755861031d0e06c2816e4)

build() {
  artix-meson $pkgname build \
    -D egl_device=true \
    -D wayland_eglstream=true
  meson compile -C build
}

package() {
  meson install -C build --destdir="$pkgdir"
}
