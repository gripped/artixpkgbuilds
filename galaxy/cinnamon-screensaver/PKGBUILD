# Maintainer: Bruno Pagani <archange@archlinux.org>
# Contributor: Eli Schwartz <eschwartz@archlinux.org>
# Contributor: Alexandre Filgueira <alexfilgueira@cinnarch.com>
# Based on gnome-screensaver package:
# Jan Alexander Steffens (heftig) <jan.steffens@gmail.com>
# Jan de Groot <jgc@archlinux.org>

pkgname=cinnamon-screensaver
pkgver=6.6.0
pkgrel=1
pkgdesc="Screensaver designed to integrate well with the Cinnamon desktop."
arch=(x86_64)
url="https://github.com/linuxmint/${pkgname}"
license=(GPL)
depends=(accountsservice cinnamon-desktop libgnomekbd
         python-cairo python-gobject python-setproctitle python-xapp xapp xdotool)
optdepends=('cinnamon-translations: i18n')
makedepends=(git gobject-introspection meson glib2-devel)
backup=(etc/pam.d/cinnamon-screensaver)
source=(git+${url}#tag=$pkgver)
sha512sums=('13b613596a6ab82b3b1909698cb43ed44b9e3c60209c0ff445a4b4188bfd1050d1a3012c86819d9fc3bcebccc18954a8a97c0d23ccdc9d964f68f0812334d207')
b2sums=('7fdce2f9c2123fe81a0b7e5018261f011f3c7fb962b09b297943a78a7f85574195f5d4038e8aa9d6ccb5e136cd4301fb68868319d9d85e6ed44c758e46ecb8f3')

build() {
  artix-meson --libexecdir=lib/cinnamon-screensaver build ${pkgname}
  meson compile -C build
}

package() {
  meson install -C build --destdir="$pkgdir"
}
